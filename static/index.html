<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager Pro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- Основное приложение -->
        <div class="app-container">
            <!-- Заголовок -->
            <header class="header">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-rocket"></i>
                        <h1>TaskFlow</h1>
                    </div>
                    
                    <div class="header-actions">
                        <button @click="toggleTheme" class="theme-toggle" :class="{ 'light': theme === 'light' }">
                            <i class="fas fa-sun" v-if="theme === 'light'"></i>
                            <i class="fas fa-moon" v-else></i>
                        </button>
                        
                        <div v-if="currentUser" class="user-menu">
                            <span class="username">{{ currentUser }}</span>
                            <button @click="logout" class="logout-btn">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                        
                        <button v-else @click="showAuthModal = true" class="login-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Войти
                        </button>
                    </div>
                </div>
            </header>

            <!-- Основной контент -->
            <main class="main-content">
                <!-- Приветствие для гостей -->
                <div v-if="!currentUser" class="welcome-section">
                    <div class="welcome-content">
                        <i class="fas fa-tasks"></i>
                        <h2>Добро пожаловать в TaskFlow</h2>
                        <p>Организуйте свои задачи эффективно и красиво</p>
                        <button @click="showAuthModal = true" class="cta-btn">
                            <i class="fas fa-rocket"></i>
                            Начать работу
                        </button>
                    </div>
                </div>

                <!-- Интерфейс для авторизованных пользователей -->
                <div v-else class="dashboard">
                    <!-- Статистика -->
                    <div class="stats-grid">
                        <div class="stat-card" :class="{ 'completed': stats.completed > 0 }">
                            <div class="stat-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number">{{ stats.total }}</span>
                                <span class="stat-label">Всего задач</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" :class="{ 'pending': stats.pending > 0 }">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number">{{ stats.pending }}</span>
                                <span class="stat-label">В ожидании</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" :class="{ 'completed': stats.completed > 0 }">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number">{{ stats.completed }}</span>
                                <span class="stat-label">Выполнено</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" :class="{ 'progress': stats.total > 0 }">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <span class="stat-number">{{ stats.percentage }}%</span>
                                <span class="stat-label">Прогресс</span>
                            </div>
                        </div>
                    </div>

                    <!-- Панель управления -->
                    <div class="control-panel">
                        <div class="search-section">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input 
                                    v-model="searchQuery" 
                                    type="text" 
                                    placeholder="Поиск задач..."
                                    @input="filterTasks">
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <button 
                                v-for="filter in filters" 
                                :key="filter.value"
                                @click="setFilter(filter.value)"
                                class="filter-btn"
                                :class="{ 'active': currentFilter === filter.value }">
                                <i :class="filter.icon"></i>
                                {{ filter.label }}
                            </button>
                        </div>
                        
                        <div class="add-section">
                            <button @click="showAddTaskModal = true" class="add-btn">
                                <i class="fas fa-plus"></i>
                                Новая задача
                            </button>
                        </div>
                    </div>

                    <!-- Список задач -->
                    <div class="tasks-section">
                        <div v-if="loading" class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>Загружаем задачи...</p>
                        </div>
                        
                        <div v-else-if="filteredTasks.length === 0" class="empty-state">
                            <i class="fas fa-clipboard-list"></i>
                            <h3>{{ searchQuery ? 'Задачи не найдены' : 'Задач пока нет' }}</h3>
                            <p v-if="!searchQuery">Создайте свою первую задачу!</p>
                            <p v-else>Попробуйте изменить поисковый запрос</p>
                        </div>
                        
                        <div v-else class="tasks-grid">
                            <div 
                                v-for="task in filteredTasks" 
                                :key="task.id"
                                class="task-card"
                                :class="{ 'completed': task.status }"
                                @click="toggleTaskStatus(task)">
                                <div class="task-header">
                                    <div class="task-status-indicator">
                                        <i v-if="task.status" class="fas fa-check"></i>
                                    </div>
                                    <h3 class="task-title">{{ task.title }}</h3>
                                    <div class="task-actions">
                                        <button @click.stop="editTask(task)" class="action-btn edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click.stop="deleteTask(task.id)" class="action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <p v-if="task.description" class="task-description">
                                    {{ task.description }}
                                </p>
                                
                                <div class="task-meta">
                                    <span class="task-date">
                                        <i class="fas fa-calendar"></i>
                                        {{ formatDate(task.created) }}
                                    </span>
                                    <span class="task-priority" :class="getPriorityClass(task)">
                                        {{ getPriorityLabel(task) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
